{"version":3,"sources":["../../../../src/plugin/payload/components/sign-in.tsx"],"sourcesContent":["'use client'\n\nimport { createAuthClient } from 'better-auth/react'\nimport { Button } from './ui/button'\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from './ui/card'\nimport { Checkbox } from './ui/checkbox'\nimport { Input } from './ui/input'\nimport { Label } from './ui/label'\nimport { PasswordInput } from './ui/password-input'\nimport { DiscordLogoIcon, GitHubLogoIcon } from '@radix-ui/react-icons'\nimport { Key, Loader2 } from 'lucide-react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { useState } from 'react'\nimport { toast } from 'sonner'\nimport { passkeyClient } from 'better-auth/client/plugins'\n\nexport default function SignIn({ admin = false }: { admin?: boolean }) {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [rememberMe, setRememberMe] = useState(false)\n  const router = useRouter()\n  const [loading, setLoading] = useState(false)\n\n  const authClient = createAuthClient({\n    plugins: [passkeyClient()],\n  })\n\n  return (\n    <Card className=\"z-50 rounded-md rounded-t-none w-full max-w-md shadow-lg\">\n      <CardHeader className=\"space-y-1\">\n        <CardTitle className=\"text-xl md:text-2xl font-bold\">Sign In</CardTitle>\n        <CardDescription className=\"text-sm text-muted-foreground\">\n          {admin\n            ? 'Enter your credentials to access the admin dashboard'\n            : 'Enter your credentials to access your account'}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\" className=\"text-sm font-medium\">\n              Email\n            </Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              placeholder=\"m@example.com\"\n              required\n              onChange={(e) => {\n                setEmail(e.target.value)\n              }}\n              value={email}\n              className=\"w-full\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label htmlFor=\"password\" className=\"text-sm font-medium\">\n                Password\n              </Label>\n              <Link href=\"/forget-password\" className=\"text-xs text-primary hover:underline\">\n                Forgot password?\n              </Link>\n            </div>\n            <PasswordInput\n              id=\"password\"\n              value={password}\n              onChange={(e: any) => setPassword(e.target.value)}\n              autoComplete=\"password\"\n              placeholder=\"Password\"\n              className=\"w-full\"\n            />\n          </div>\n          {!admin && (\n            <div className=\"flex items-center gap-2\">\n              <Checkbox\n                id=\"remember\"\n                onClick={() => {\n                  setRememberMe(!rememberMe)\n                }}\n              />\n              <Label htmlFor=\"remember\" className=\"text-sm\">\n                Remember me\n              </Label>\n            </div>\n          )}\n\n          <Button\n            type=\"submit\"\n            className=\"w-full\"\n            variant=\"outline\"\n            disabled={loading}\n            onClick={async () => {\n              await authClient.signIn.email({\n                email: email,\n                password: password,\n                callbackURL: admin ? '/admin' : '/dashboard',\n                rememberMe,\n                fetchOptions: {\n                  onRequest: () => {\n                    setLoading(true)\n                  },\n                  onResponse: () => {\n                    setLoading(false)\n                  },\n                  onError: (ctx) => {\n                    toast.error(ctx.error.message)\n                  },\n                },\n              })\n            }}\n          >\n            {loading ? <Loader2 size={16} className=\"animate-spin mr-2\" /> : null}\n            {loading ? 'Signing in...' : 'Sign in'}\n          </Button>\n\n          {!admin && (\n            <div>\n              <div className=\"relative my-4\">\n                <div className=\"relative flex justify-center text-xs uppercase border-b border-muted pb-4\">\n                  <span className=\"bg-card px-2 text-muted-foreground\">Or continue with</span>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-4 gap-2 sm:grid-cols-7\">\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'github',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"GitHub\"\n                >\n                  <GitHubLogoIcon className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'discord',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Discord\"\n                >\n                  <DiscordLogoIcon className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'google',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Google\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 256 262\"\n                  >\n                    <path\n                      fill=\"#4285F4\"\n                      d=\"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622l38.755 30.023l2.685.268c24.659-22.774 38.875-56.282 38.875-96.027\"\n                    />\n                    <path\n                      fill=\"#34A853\"\n                      d=\"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055c-34.523 0-63.824-22.773-74.269-54.25l-1.531.13l-40.298 31.187l-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1\"\n                    />\n                    <path\n                      fill=\"#FBBC05\"\n                      d=\"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82c0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602z\"\n                    />\n                    <path\n                      fill=\"#EB4335\"\n                      d=\"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0C79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251\"\n                    />\n                  </svg>\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    const { data } = await authClient.signIn.social({\n                      provider: 'microsoft',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Microsoft\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      fill=\"currentColor\"\n                      d=\"M2 3h9v9H2zm9 19H2v-9h9zM21 3v9h-9V3zm0 19h-9v-9h9z\"\n                    ></path>\n                  </svg>\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'twitch',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Twitch\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      fill=\"currentColor\"\n                      d=\"M11.64 5.93h1.43v4.28h-1.43m3.93-4.28H17v4.28h-1.43M7 2L3.43 5.57v12.86h4.28V22l3.58-3.57h2.85L20.57 12V2m-1.43 9.29l-2.85 2.85h-2.86l-2.5 2.5v-2.5H7.71V3.43h11.43Z\"\n                    ></path>\n                  </svg>\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'facebook',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Facebook\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      fill=\"currentColor\"\n                      d=\"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95\"\n                    ></path>\n                  </svg>\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"h-10 w-10\"\n                  onClick={async () => {\n                    await authClient.signIn.social({\n                      provider: 'twitter',\n                      callbackURL: '/dashboard',\n                    })\n                  }}\n                  title=\"Twitter\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 14 14\"\n                  >\n                    <g fill=\"none\">\n                      <g clipPath=\"url(#primeTwitter0)\">\n                        <path\n                          fill=\"currentColor\"\n                          d=\"M11.025.656h2.147L8.482 6.03L14 13.344H9.68L6.294 8.909l-3.87 4.435H.275l5.016-5.75L0 .657h4.43L7.486 4.71zm-.755 11.4h1.19L3.78 1.877H2.504z\"\n                        ></path>\n                      </g>\n                      <defs>\n                        <clipPath id=\"primeTwitter0\">\n                          <path fill=\"#fff\" d=\"M0 0h14v14H0z\"></path>\n                        </clipPath>\n                      </defs>\n                    </g>\n                  </svg>\n                </Button>\n              </div>\n            </div>\n          )}\n\n          <Button\n            className=\"w-full flex items-center justify-center gap-2 mt-2\"\n            onClick={async () => {\n              await authClient.signIn.passkey({\n                fetchOptions: {\n                  onSuccess(context) {\n                    router.push(admin ? '/admin' : '/dashboard')\n                  },\n                  onError(context) {\n                    toast.error(context.error.message)\n                  },\n                },\n              })\n            }}\n          >\n            <Key size={16} />\n            <span>Sign in with Passkey</span>\n          </Button>\n        </div>\n      </CardContent>\n      <CardFooter className=\"flex flex-col\">\n        <div className=\"w-full border-t pt-4\">\n          <p className=\"text-center text-xs text-muted-foreground\">\n            Secured by{' '}\n            <Link\n              href=\"https://github.com/forrestdevs/payload-better-auth\"\n              className=\"font-medium text-orange-500\"\n            >\n              payload-better-auth\n            </Link>\n          </p>\n        </div>\n      </CardFooter>\n    </Card>\n  )\n}\n"],"names":["createAuthClient","Button","Card","CardContent","CardDescription","CardFooter","CardHeader","CardTitle","Checkbox","Input","Label","PasswordInput","DiscordLogoIcon","GitHubLogoIcon","Key","Loader2","Link","useRouter","useState","toast","passkeyClient","SignIn","admin","email","setEmail","password","setPassword","rememberMe","setRememberMe","router","loading","setLoading","authClient","plugins","className","div","htmlFor","id","type","placeholder","required","onChange","e","target","value","href","autoComplete","onClick","variant","disabled","signIn","callbackURL","fetchOptions","onRequest","onResponse","onError","ctx","error","message","size","span","social","provider","title","svg","xmlns","width","height","viewBox","path","fill","d","data","g","clipPath","defs","passkey","onSuccess","context","push","p"],"mappings":"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"}