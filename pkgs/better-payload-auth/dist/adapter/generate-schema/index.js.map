{"version":3,"sources":["../../../src/adapter/generate-schema/index.ts"],"sourcesContent":["import type { BetterAuthOptions } from 'better-auth'\nimport fs from 'node:fs/promises'\nimport path from 'node:path'\nimport { generateSchemaBuilderStage } from './generate-schema-builder'\nimport { getPayloadSchema } from './get-payload-schema'\n\nexport const generateSchema = async (\n  BAoptions: BetterAuthOptions,\n  options: { outputDir: string } = {\n    outputDir: './generated',\n  },\n): Promise<string> => {\n  const { outputDir } = options\n  const existing_schema_code: string = await getPayloadSchema(outputDir)\n\n  const new_schema_code = await generateSchemaBuilderStage({\n    code: existing_schema_code,\n    BAOptions: BAoptions,\n  })\n\n  const schemaPath = path.resolve(outputDir, 'schema.ts')\n  await fs.writeFile(schemaPath, new_schema_code, 'utf8')\n\n  return new_schema_code\n}\n"],"names":["fs","path","generateSchemaBuilderStage","getPayloadSchema","generateSchema","BAoptions","options","outputDir","existing_schema_code","new_schema_code","code","BAOptions","schemaPath","resolve","writeFile"],"mappings":"AACA,OAAOA,QAAQ,mBAAkB;AACjC,OAAOC,UAAU,YAAW;AAC5B,SAASC,0BAA0B,QAAQ,4BAA2B;AACtE,SAASC,gBAAgB,QAAQ,uBAAsB;AAEvD,OAAO,MAAMC,iBAAiB,OAC5BC,WACAC,UAAiC;IAC/BC,WAAW;AACb,CAAC;IAED,MAAM,EAAEA,SAAS,EAAE,GAAGD;IACtB,MAAME,uBAA+B,MAAML,iBAAiBI;IAE5D,MAAME,kBAAkB,MAAMP,2BAA2B;QACvDQ,MAAMF;QACNG,WAAWN;IACb;IAEA,MAAMO,aAAaX,KAAKY,OAAO,CAACN,WAAW;IAC3C,MAAMP,GAAGc,SAAS,CAACF,YAAYH,iBAAiB;IAEhD,OAAOA;AACT,EAAC"}